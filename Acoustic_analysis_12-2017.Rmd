---
title: "Acoustic analysis"
author: "Elan Portner"
date: "12/2/2017"
output: html_document
---


```{r get necessary packages, echo = FALSE, warning=FALSE}
# 1) clear workspace
rm(list = ls(all = TRUE)); 

# 2) load packages: (fyi, you probably don't need all of these for this code, but good ones to have for spatial R stuff...)
## if you need to install any, uncomment and run (shown are some examples below)...

library(ncdf4); library(ncdf)
library(RNetCDF)
library(raster)
library(maps)
library(mapdata)
library(maptools)
library(rgdal)
library(move)
library(mapproj)
library(sp)
require(dismo)
library(ggplot2)
library(ggmap)
library(RColorBrewer)
library(reshape2)
library(mapplots)
library(rgeos)
library(polyclip)
library(spatstat)

```



```{r get_data, echo = FALSE, warning=FALSE}
#read in data file - see "~/Assigning_regions_to_acoustics.R" for code to assign data to regions
acoustics = read.csv("~/Documents/R/Dosidicus/acoustics/acousticdata_uper200m_with_regions.csv") 
acousticdata = acoustics
```

You can also embed plots, for example:

```{r plot_cruise_track, echo = FALSE, warning=FALSE, error=FALSE}
library(ggmap)
library(ggplot2)
##### plot google map overlaid with cruise tracks ######

#need to convert longitude back to E/W for plotting map with google
acousticdata$Lon_M = acousticdata$Lon_M - 360

#set bounds of map using coordinates of our data
bc_bbox <- make_bbox(lat = Lat_M, lon = Lon_M, data = acousticdata)
bc_bbox
#>       left     bottom      right        top 
#> -133.63297   47.92497 -122.33652   55.80833

# grab the maps from google
bc_big <- get_map(location = c(left =-117.04904, bottom = 22.41260, right = -104.20950, top = 34.77702), source = "google", maptype = "satellite")
#> Warning: bounding box given to google - spatial extent only approximate.
#> converting bounding box to center/zoom specification. (experimental)
#> Map from URL : http://maps.googleapis.com/maps/api/staticmap?center=51.86665,-127.98475&zoom=6&size=640x640&scale=2&maptype=terrain&language=en-EN&sensor=false

# plot the points and color them by sector
p <- ggmap(bc_big) + 
  geom_point(data = acousticdata, mapping = aes(x = Lon_M, y = Lat_M, color = region), size = 0.1, stroke = 0, alpha = 0.9)+
  guides(colour = guide_legend(override.aes = list(size=2, stroke=1.5)))

p
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
